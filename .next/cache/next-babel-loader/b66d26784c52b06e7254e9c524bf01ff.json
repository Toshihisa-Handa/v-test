{"ast":null,"code":"import db from '@/lib/db-admin';\nexport default ((req, res) => {\n  if (!req.query.id) {\n    return db.ref('views').once('value', snapshot => {\n      const views = snapshot.val();\n      const allViews = Object.values(views).reduce((total, value) => total + value);\n      return res.status(200).json({\n        total: allViews\n      });\n    });\n  }\n\n  const ref = db.ref('views').child(req.query.id);\n  return ref.once('value', snapshot => {\n    res.status(200).json({\n      total: snapshot.val()\n    });\n  });\n});","map":{"version":3,"sources":["/Users/toshi/Desktop/v-test/pages/api/page-views.js"],"names":["db","req","res","query","id","ref","once","snapshot","views","val","allViews","Object","values","reduce","total","value","status","json","child"],"mappings":"AAAA,OAAOA,EAAP,MAAe,gBAAf;AAEA,gBAAe,CAACC,GAAD,EAAMC,GAAN,KAAc;AAC3B,MAAI,CAACD,GAAG,CAACE,KAAJ,CAAUC,EAAf,EAAmB;AACjB,WAAOJ,EAAE,CAACK,GAAH,CAAO,OAAP,EAAgBC,IAAhB,CAAqB,OAArB,EAA+BC,QAAD,IAAc;AACjD,YAAMC,KAAK,GAAGD,QAAQ,CAACE,GAAT,EAAd;AACA,YAAMC,QAAQ,GAAGC,MAAM,CAACC,MAAP,CAAcJ,KAAd,EAAqBK,MAArB,CACf,CAACC,KAAD,EAAQC,KAAR,KAAkBD,KAAK,GAAGC,KADX,CAAjB;AAIA,aAAOb,GAAG,CAACc,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAC1BH,QAAAA,KAAK,EAAEJ;AADmB,OAArB,CAAP;AAGD,KATM,CAAP;AAUD;;AAED,QAAML,GAAG,GAAGL,EAAE,CAACK,GAAH,CAAO,OAAP,EAAgBa,KAAhB,CAAsBjB,GAAG,CAACE,KAAJ,CAAUC,EAAhC,CAAZ;AAEA,SAAOC,GAAG,CAACC,IAAJ,CAAS,OAAT,EAAmBC,QAAD,IAAc;AACrCL,IAAAA,GAAG,CAACc,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACnBH,MAAAA,KAAK,EAAEP,QAAQ,CAACE,GAAT;AADY,KAArB;AAGD,GAJM,CAAP;AAKD,CArBD","sourcesContent":["import db from '@/lib/db-admin';\n\nexport default (req, res) => {\n  if (!req.query.id) {\n    return db.ref('views').once('value', (snapshot) => {\n      const views = snapshot.val();\n      const allViews = Object.values(views).reduce(\n        (total, value) => total + value\n      );\n\n      return res.status(200).json({\n        total: allViews\n      });\n    });\n  }\n\n  const ref = db.ref('views').child(req.query.id);\n\n  return ref.once('value', (snapshot) => {\n    res.status(200).json({\n      total: snapshot.val()\n    });\n  });\n};\n"]},"metadata":{},"sourceType":"module"}