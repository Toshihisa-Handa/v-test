{"ast":null,"code":"import { google } from 'googleapis';\nimport googleAuth from '@/lib/google/auth';\nexport default (async (_, res) => {\n  const auth = await googleAuth.getClient();\n  const youtube = google.youtube({\n    auth,\n    version: 'v3'\n  });\n  const response = await youtube.channels.list({\n    id: 'UCZMli3czZnd1uoc1ShTouQw',\n    part: 'statistics'\n  });\n  const channel = response.data.items[0];\n  const {\n    subscriberCount,\n    viewCount\n  } = channel.statistics;\n  res.setHeader('Cache-Control', 'public, s-maxage=1200, stale-while-revalidate=600');\n  return res.status(200).json({\n    subscriberCount,\n    viewCount\n  });\n});","map":{"version":3,"sources":["/Users/toshi/Desktop/v-test/pages/api/youtube.js"],"names":["google","googleAuth","_","res","auth","getClient","youtube","version","response","channels","list","id","part","channel","data","items","subscriberCount","viewCount","statistics","setHeader","status","json"],"mappings":"AAAA,SAASA,MAAT,QAAuB,YAAvB;AAEA,OAAOC,UAAP,MAAuB,mBAAvB;AAEA,gBAAe,OAAOC,CAAP,EAAUC,GAAV,KAAkB;AAC/B,QAAMC,IAAI,GAAG,MAAMH,UAAU,CAACI,SAAX,EAAnB;AACA,QAAMC,OAAO,GAAGN,MAAM,CAACM,OAAP,CAAe;AAC7BF,IAAAA,IAD6B;AAE7BG,IAAAA,OAAO,EAAE;AAFoB,GAAf,CAAhB;AAKA,QAAMC,QAAQ,GAAG,MAAMF,OAAO,CAACG,QAAR,CAAiBC,IAAjB,CAAsB;AAC3CC,IAAAA,EAAE,EAAE,0BADuC;AAE3CC,IAAAA,IAAI,EAAE;AAFqC,GAAtB,CAAvB;AAKA,QAAMC,OAAO,GAAGL,QAAQ,CAACM,IAAT,CAAcC,KAAd,CAAoB,CAApB,CAAhB;AACA,QAAM;AAAEC,IAAAA,eAAF;AAAmBC,IAAAA;AAAnB,MAAiCJ,OAAO,CAACK,UAA/C;AAEAf,EAAAA,GAAG,CAACgB,SAAJ,CACE,eADF,EAEE,mDAFF;AAKA,SAAOhB,GAAG,CAACiB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAC1BL,IAAAA,eAD0B;AAE1BC,IAAAA;AAF0B,GAArB,CAAP;AAID,CAxBD","sourcesContent":["import { google } from 'googleapis';\n\nimport googleAuth from '@/lib/google/auth';\n\nexport default async (_, res) => {\n  const auth = await googleAuth.getClient();\n  const youtube = google.youtube({\n    auth,\n    version: 'v3'\n  });\n\n  const response = await youtube.channels.list({\n    id: 'UCZMli3czZnd1uoc1ShTouQw',\n    part: 'statistics'\n  });\n\n  const channel = response.data.items[0];\n  const { subscriberCount, viewCount } = channel.statistics;\n\n  res.setHeader(\n    'Cache-Control',\n    'public, s-maxage=1200, stale-while-revalidate=600'\n  );\n\n  return res.status(200).json({\n    subscriberCount,\n    viewCount\n  });\n};\n"]},"metadata":{},"sourceType":"module"}