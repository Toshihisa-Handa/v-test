{"ast":null,"code":"import Unsplash, { toJson } from 'unsplash-js';\nlet unsplash;\nexport default (async (_, res) => {\n  if (!unsplash) {\n    unsplash = new Unsplash({\n      accessKey: process.env.UNSPLASH_ACCESS_KEY\n    });\n  }\n\n  const userStats = await unsplash.users.statistics('leerob');\n  const {\n    downloads,\n    views\n  } = await toJson(userStats);\n  res.setHeader('Cache-Control', 'public, s-maxage=1200, stale-while-revalidate=600');\n  return res.status(200).json({\n    downloads: downloads.total,\n    views: views.total\n  });\n});","map":{"version":3,"sources":["/Users/toshi/Desktop/v-test/pages/api/unsplash.js"],"names":["Unsplash","toJson","unsplash","_","res","accessKey","process","env","UNSPLASH_ACCESS_KEY","userStats","users","statistics","downloads","views","setHeader","status","json","total"],"mappings":"AAAA,OAAOA,QAAP,IAAmBC,MAAnB,QAAiC,aAAjC;AAEA,IAAIC,QAAJ;AAEA,gBAAe,OAAOC,CAAP,EAAUC,GAAV,KAAkB;AAC/B,MAAI,CAACF,QAAL,EAAe;AACbA,IAAAA,QAAQ,GAAG,IAAIF,QAAJ,CAAa;AACtBK,MAAAA,SAAS,EAAEC,OAAO,CAACC,GAAR,CAAYC;AADD,KAAb,CAAX;AAGD;;AAED,QAAMC,SAAS,GAAG,MAAMP,QAAQ,CAACQ,KAAT,CAAeC,UAAf,CAA0B,QAA1B,CAAxB;AACA,QAAM;AAAEC,IAAAA,SAAF;AAAaC,IAAAA;AAAb,MAAuB,MAAMZ,MAAM,CAACQ,SAAD,CAAzC;AAEAL,EAAAA,GAAG,CAACU,SAAJ,CACE,eADF,EAEE,mDAFF;AAKA,SAAOV,GAAG,CAACW,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAC1BJ,IAAAA,SAAS,EAAEA,SAAS,CAACK,KADK;AAE1BJ,IAAAA,KAAK,EAAEA,KAAK,CAACI;AAFa,GAArB,CAAP;AAID,CAnBD","sourcesContent":["import Unsplash, { toJson } from 'unsplash-js';\n\nlet unsplash;\n\nexport default async (_, res) => {\n  if (!unsplash) {\n    unsplash = new Unsplash({\n      accessKey: process.env.UNSPLASH_ACCESS_KEY\n    });\n  }\n\n  const userStats = await unsplash.users.statistics('leerob');\n  const { downloads, views } = await toJson(userStats);\n\n  res.setHeader(\n    'Cache-Control',\n    'public, s-maxage=1200, stale-while-revalidate=600'\n  );\n\n  return res.status(200).json({\n    downloads: downloads.total,\n    views: views.total\n  });\n};\n"]},"metadata":{},"sourceType":"module"}